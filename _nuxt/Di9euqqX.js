import{_ as w}from"./or1xPPuv.js";import{e as S,h as L,i as C,c as s,a as l,j as v,u as t,t as _,o as a,_ as V,r as z,k as N,l as O,f as h,b as P,w as q,F as D,m as A,d as E}from"./C-0yA-2c.js";import{a as F}from"./C0WzvehL.js";import{q as M,u as R}from"./CqQyTZ8R.js";const j={key:2,class:"nav-button ellipsis-left"},I={class:"nav-button curr"},T={key:5,class:"nav-button ellipsis-right"},G=S({__name:"BlogPagination",props:{currentPage:{},pageSize:{},postCount:{}},emits:["next","prev","navigate","size"],setup($,{emit:i}){const d=g=>B(+g.target.value),p=$,u=i,{currentPage:n,pageSize:b,postCount:k}=L(p),c=C(()=>Math.ceil(k.value/b.value)),m=C(()=>n.value-1>=2?n.value-1:null),e=C(()=>n.value+1<=c.value-1?n.value+1:null),y=()=>u("next"),f=()=>u("prev"),o=g=>u("navigate",g),B=g=>u("size",g);return(g,r)=>(a(),s("aside",null,[l("nav",null,[t(n)!==1?(a(),s("button",{key:0,class:"nav-button back",type:"button",onClick:f}," < ")):v("",!0),t(n)>1?(a(),s("button",{key:1,class:"nav-button first",type:"button",onClick:r[0]||(r[0]=x=>o(1))}," 1 ")):v("",!0),t(m)&&t(m)>2?(a(),s("span",j,"...")):v("",!0),t(m)?(a(),s("button",{key:3,class:"nav-button currLessOne",type:"button",onClick:r[1]||(r[1]=x=>o(t(m)))},_(t(n)-1),1)):v("",!0),l("span",I,_(t(n)),1),t(e)?(a(),s("button",{key:4,class:"nav-button currPlusOne",type:"button",onClick:r[2]||(r[2]=x=>o(t(e)))},_(t(n)+1),1)):v("",!0),t(e)&&t(e)<t(c)-1?(a(),s("span",T,"...")):v("",!0),t(n)<t(c)?(a(),s("button",{key:6,class:"nav-button last",type:"button",onClick:r[3]||(r[3]=x=>o(t(c)))},_(t(c)),1)):v("",!0),t(n)!==t(c)?(a(),s("button",{key:7,class:"nav-button next",type:"button",onClick:y}," > ")):v("",!0)]),l("select",{onChange:d},r[4]||(r[4]=[l("option",{value:5},"5",-1),l("option",{value:10},"10",-1),l("option",{value:25},"25",-1),l("option",{value:50},"50",-1)]),32)]))}}),H=V(G,[["__scopeId","data-v-45727eb0"]]),J={id:"blog"},K={key:0,class:"post-list"},Q=["datetime"],U=["href"],W={key:1},et=S({__name:"index",async setup($){let i,d;F({title:"Blag"});const p=z(1),u=z(5);N(u,()=>p.value=1);const n=O({path:"blog",skip:(p.value-1)*u.value,limit:u.value,sort:[{date:-1}]});N([p,u],([m,e])=>{n.skip=(m-1)*e,n.limit=e});const b=M("blog"),k=([i,d]=h(()=>b.count()),i=await i,d(),i),{data:c}=([i,d]=h(()=>R("posts",b.select("title","path","meta").skip(n.skip).limit(n.limit).all)),i=await i,d(),i);return(m,e)=>{const y=w,f=H;return a(),s("div",J,[l("header",null,[l("div",null,[P(y,{to:"/"},{default:q(()=>e[4]||(e[4]=[E("Voltar")])),_:1,__:[4]}),e[5]||(e[5]=l("h1",null,"Blag",-1))]),e[6]||(e[6]=l("p",null,' Estatisticamente falando, escrevo sobre tecnologia com uma chance "não-zero" de falar besteira ',-1))]),l("main",null,[t(c)?(a(),s("ul",K,[(a(!0),s(D,null,A(t(c),o=>(a(),s("li",{key:o.path},[l("time",{datetime:o.meta.date},_(`${new Date(o.meta.date).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})}`),9,Q),l("a",{href:o.path},_(o.title),9,U)]))),128))])):(a(),s("p",W,"Não tem nenhum post ainda!")),P(f,{"current-page":t(p),"page-size":t(u),"post-count":t(k),onPrev:e[0]||(e[0]=o=>p.value--),onNext:e[1]||(e[1]=o=>p.value++),onNavigate:e[2]||(e[2]=o=>p.value=o),onSize:e[3]||(e[3]=o=>u.value=o)},null,8,["current-page","page-size","post-count"])])])}}});export{et as default};
